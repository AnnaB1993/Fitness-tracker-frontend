(this.webpackJsonpfitness=this.webpackJsonpfitness||[]).push([[0],{56:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var r=n(5),c=n(1),a=n(30),s=n.n(a),i=n(10),o=n(3),u=n(12),l=n.n(u),j=n(2),p=n.n(j),b=n(4);function h(e){localStorage.setItem("currentUser",JSON.stringify(e))}function d(){return JSON.parse(localStorage.getItem("currentUser"))}function f(e){localStorage.setItem("token",e)}function O(){return localStorage.getItem("token")}var v="https://fitnesstrac-kr.herokuapp.com/api";function x(){return(x=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.get("".concat(v,"/routines"));case 3:return t=e.sent,n=t.data,console.log(n),e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function m(){return(m=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.get("".concat(v,"/activities"));case 3:return t=e.sent,n=t.data,console.log(n),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return(y=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",l.a.post("".concat(v,"/users/register"),t,{validateStatus:function(e){return e>=200&&e<300||401===e}}));case 4:e.prev=4,e.t0=e.catch(0),console.error(e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}function k(e){return w.apply(this,arguments)}function w(){return(w=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",l.a.post("https://fitnesstrac-kr.herokuapp.com/api/users/login",t));case 4:e.prev=4,e.t0=e.catch(0),console.error(e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}function S(){return(S=Object(b.a)(p.a.mark((function e(t){var n,r,c,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:"Bearer ".concat(t)}},e.prev=1,r=d(),c=r.username,e.next=6,l.a.get("".concat(v,"/users/").concat(c,"/routines"),n);case 6:return a=e.sent,console.log(a),e.abrupt("return",a.data);case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function C(e,t,n){return N.apply(this,arguments)}function N(){return(N=Object(b.a)(p.a.mark((function e(t,n,r){var c,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=O(),e.prev=1,e.next=4,fetch("https://fitnesstrac-kr.herokuapp.com/api/routines",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({name:t,goal:n,isPublic:r})});case 4:return a=e.sent,e.next=7,a.json();case 7:return s=e.sent,console.log(s),e.abrupt("return",s);case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function R(e,t){return U.apply(this,arguments)}function U(){return(U=Object(b.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=O(),e.prev=1,e.next=4,fetch("https://fitnesstrac-kr.herokuapp.com/api/activities",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({name:t,description:n})});case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function T(e){return D.apply(this,arguments)}function D(){return(D=Object(b.a)(p.a.mark((function e(t){var n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O(),e.prev=1,r=fetch("".concat(v,"/routines/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}),e.next=5,r.json();case 5:return c=e.sent,e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}n(56);var A=n(0),I=function(e){var t=e.singleRoutine,n=(e.routinesList,e.setUserRoutines),r=e.userRoutines,c=d(),a=(t.id,t.name),s=t.creatorName,i=t.goal,o=t.activities,u=function(){var e=Object(b.a)(p.a.mark((function e(t){var c,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:c=e.sent,a=r.filter((function(e){return e.id!==c.id})),n(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsxs)("div",{className:"routine",children:[Object(A.jsxs)("p",{id:"name-id",children:["Routine: ",a]}),Object(A.jsxs)("p",{id:"creatorName-id",children:[" by ",s]}),Object(A.jsxs)("p",{id:"goal-id",children:["Goal is: ",i]}),Object(A.jsxs)("div",{id:"routine-activities",children:["Activities for this routine:",o&&o.map((function(e){var t=e.description,n=e.duration,r=e.count;return Object(A.jsxs)("div",{className:"activity-dropdown",children:[Object(A.jsxs)("p",{children:["Description: ",t]}),Object(A.jsxs)("p",{children:["Duration: ",n]}),Object(A.jsxs)("p",{children:["Count: ",r]})]},e.routineActivityId)})),c&&c.username===s?Object(A.jsxs)("footer",{children:[Object(A.jsx)("button",{children:"Update"}),Object(A.jsx)("button",{id:"delete-routine-button",onClick:function(e){e.preventDefault(),u(t.id)},children:"Delete"})]}):" "]})]})},L=(n(58),function(e){var t=e.routinesList;return console.log(t),Object(A.jsx)("div",{className:"all-routines",children:t.map((function(e){return Object(A.jsx)(I,{singleRoutine:e},e.id)}))})}),E=function(e){var t=e.user;return t?Object(A.jsxs)("div",{id:"home",children:["Click buttons to change content, ",t.username]}):Object(A.jsx)("div",{id:"home",children:"Click buttons to change content"})},J=(n(59),function(e){var t=e.user;return Object(A.jsxs)("header",{className:"app-header",children:[Object(A.jsx)("h2",{children:"FITNESS APP"}),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(i.b,{to:"/home",activeClassName:"current",children:"Home"}),Object(A.jsx)(i.b,{to:"/routines",activeClassName:"current",children:"Routines"}),Object(A.jsx)(i.b,{to:"/activities",activeClassName:"current",children:"Activities"}),t?Object(A.jsxs)(A.Fragment,{children:[" ",Object(A.jsxs)(i.b,{to:"/my-routines",activeClassName:"current",children:[t.username,"'s Routines"]}),Object(A.jsx)(i.b,{to:"/my-activities",activeClassName:"current",children:"Create new activity"}),Object(A.jsx)(i.b,{to:"/logout",activeClassName:"current",children:"Log out"})]}):Object(A.jsxs)(A.Fragment,{children:[" ",Object(A.jsx)(i.b,{to:"/login",activeClassName:"current",children:"Log in"}),Object(A.jsx)(i.b,{to:"/register",activeClassName:"current",children:"No account? Register"})]})]})]})}),P=(n(65),n(66),function(e){var t=e.activitiesList;return Object(A.jsx)("div",{className:"all-activities",children:t.map((function(e){e.id;var t=e.description,n=e.name;return Object(A.jsxs)("div",{className:"activity",children:[n," - ",t]},e.id)}))})}),B=function(e){var t=e.setUser,n=e.setToken,a=Object(o.f)(),s=Object(c.useState)(""),i=Object(r.a)(s,2),u=i[0],l=i[1],j=Object(c.useState)(""),d=Object(r.a)(j,2),O=d[0],v=d[1];return Object(A.jsxs)("form",{id:"register-form",onSubmit:function(){var e=Object(b.a)(p.a.mark((function e(r){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,g({username:u,password:O});case 3:c=e.sent,console.log(c),200===c.status?(h(c.data.user),f(c.data.token),t(c.data.user),n(c.data.token),a.push("/home")):401===c.status?console.error(c.data.message):alert("something went wrong, try again");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(A.jsx)("input",{type:"text",placeholder:"Your name here",value:u,onChange:function(e){l(e.target.value)}}),Object(A.jsx)("br",{}),Object(A.jsx)("br",{}),Object(A.jsx)("input",{type:"text",placeholder:"Your password",value:O,onChange:function(e){v(e.target.value)}}),Object(A.jsx)("br",{}),Object(A.jsx)("br",{}),Object(A.jsx)("input",{type:"submit",value:"Sigh up"})]})},Y=function(e){var t=e.setUser,n=e.setToken,a=Object(c.useState)(""),s=Object(r.a)(a,2),i=s[0],u=s[1],l=Object(c.useState)(""),j=Object(r.a)(l,2),d=j[0],O=j[1],v=Object(o.f)();return Object(A.jsxs)("form",{id:"login-form",onSubmit:function(){var e=Object(b.a)(p.a.mark((function e(r){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,k({username:i,password:d});case 3:200===(c=e.sent).status?(h(c.data.user),f(c.data.token),n(c.data.token),t(c.data.user),v.push("/home")):401===c.status?console.error(c.data.message):alert("something is wrong, try again"),console.log(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(A.jsx)("input",{type:"text",placeholder:"Your name here",value:i,onChange:function(e){u(e.target.value)}}),Object(A.jsx)("br",{}),Object(A.jsx)("br",{}),Object(A.jsx)("input",{type:"text",placeholder:"Your password",value:d,onChange:function(e){O(e.target.value)}}),Object(A.jsx)("br",{}),Object(A.jsx)("br",{}),Object(A.jsx)("input",{type:"submit",value:"Sigh in"})]})},z=function(e){var t=e.setUser,n=e.setToken,r=d(),c=Object(o.f)();return Object(A.jsxs)("div",{id:"logout",children:["Would you like to log out, ",r.username,"?",Object(A.jsx)("button",{onClick:function(e){e.preventDefault(),localStorage.removeItem("currentUser"),localStorage.removeItem("token"),t(""),n(""),c.push("/home")},children:"Yes"})]})},F=n(32),G=function(e){var t=e.userRoutines,n=e.setUserRoutines,a=Object(c.useState)(""),s=Object(r.a)(a,2),i=s[0],o=s[1],u=Object(c.useState)(""),l=Object(r.a)(u,2),j=l[0],h=l[1],f=Object(c.useState)(!1),O=Object(r.a)(f,2),v=O[0],x=O[1];return Object(A.jsxs)("form",{id:"new-routine",onSubmit:function(){var e=Object(b.a)(p.a.mark((function e(r){var c,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,C(i,j,v);case 3:c=e.sent,a=d(),c.creatorName=a.username,console.log(t),n([].concat(Object(F.a)(t),[c])),console.log(c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[" ","New Routine",Object(A.jsx)("input",{type:"text",placeholder:"Name",value:i,onChange:function(e){o(e.target.value)}}),Object(A.jsx)("input",{type:"text",placeholder:"Goal",value:j,onChange:function(e){h(e.target.value)}}),Object(A.jsx)("label",{children:"Is it public"}),Object(A.jsx)("input",{type:"checkbox",id:"isPublic",defaultChecked:v,onChange:function(e){x(e.target.value)}}),Object(A.jsx)("input",{type:"submit",value:"Create"})]})},H=function(e){var t=e.userRoutines,n=e.setUserRoutines,r=d();return console.log(t),Object(A.jsxs)("div",{className:"user-routines",children:[t?t.map((function(e){return Object(A.jsx)(I,{singleRoutine:e,setUserRoutines:n},e.id)})):Object(A.jsx)("div",{children:"No routines yet"})," ",r&&Object(A.jsx)("footer",{children:Object(A.jsx)(G,{userRoutines:t,setUserRoutines:n})})]})},W=function(e){e.activitiesList;var t=Object(c.useState)(""),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(""),o=Object(r.a)(i,2),u=o[0],l=o[1];return Object(A.jsxs)("form",{id:"new-activity",onSubmit:function(){var e=Object(b.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,R(a,u);case 3:n=e.sent,console.log(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[" ","New Activity",Object(A.jsx)("input",{type:"text",placeholder:"Name",value:a,onChange:function(e){return s(e.target.value)}}),Object(A.jsx)("input",{type:"text",placeholder:"Description",value:u,onChange:function(e){return l(e.target.value)}}),Object(A.jsx)("input",{type:"submit",value:"Create"})]})},q=function(){var e=Object(c.useState)(d()),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(O()),u=Object(r.a)(s,2),l=u[0],j=u[1],p=Object(c.useState)([]),b=Object(r.a)(p,2),h=b[0],f=b[1],v=Object(c.useState)([]),g=Object(r.a)(v,2),y=g[0],k=g[1],w=Object(c.useState)([]),C=Object(r.a)(w,2),N=C[0],R=C[1],U=Object(c.useState)([]),T=Object(r.a)(U,2);T[0],T[1];return Object(c.useEffect)((function(){(function(){return x.apply(this,arguments)})().then((function(e){return f(e)})).catch((function(e){console.error(e)})),function(){return m.apply(this,arguments)}().then((function(e){return k(e)})).catch((function(e){console.error(e)}))}),[]),Object(c.useEffect)((function(){(function(e){return S.apply(this,arguments)})(l).then((function(e){return R(e)})).catch((function(e){return console.error(e)}))}),[n]),Object(A.jsxs)(i.a,{children:[Object(A.jsxs)("div",{id:"App",children:[Object(A.jsx)(J,{user:n}),Object(A.jsxs)(o.c,{children:[Object(A.jsx)(o.a,{path:"/routines",children:Object(A.jsx)(L,{routinesList:h})}),Object(A.jsx)(o.a,{path:"/activities",children:Object(A.jsx)(P,{activitiesList:y})}),Object(A.jsx)(o.a,{path:"/register",children:Object(A.jsx)(B,{setUser:a,setToken:j})}),Object(A.jsx)(o.a,{path:"/home",children:Object(A.jsx)(E,{user:n})}),Object(A.jsx)(o.a,{path:"/login",children:Object(A.jsx)(Y,{setUser:a,setToken:j})}),Object(A.jsx)(o.a,{path:"/logout",children:Object(A.jsx)(z,{setUser:a,setToken:j})}),Object(A.jsx)(o.a,{path:"/my-routines",children:Object(A.jsx)(H,{userRoutines:N,setUserRoutines:R})}),Object(A.jsx)(o.a,{path:"/my-activities",children:Object(A.jsx)(W,{activitiesList:y})})]})]})," "]})};s.a.render(Object(A.jsx)(q,{}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.79e8e435.chunk.js.map